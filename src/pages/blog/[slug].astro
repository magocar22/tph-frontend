---
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';
import BaseHead from '../../components/BaseHead.astro';
import Navbar from '../../components/Navbar.astro';
import Footer from '../../components/Footer.astro';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map(post => ({
    params: { slug: post.slug }, props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await post.render();
---

<html lang="es">
  <head>
    <BaseHead title={post.data.titulo} description={post.data.descripcion} />
  </head>
  <body class="bg-white font-sans text-gray-800">
    
    <!-- Navbar Blanco Sólido (Mejor para lectura) -->
    <div class="pt-20"> <!-- Espacio para el navbar fijo -->
        <Navbar />
    </div>

    <main class="max-w-4xl mx-auto px-4 py-12">
        
        <!-- Encabezado del Artículo -->
        <div class="text-center mb-12">
            <span class="text-blue-600 font-bold tracking-widest text-xs uppercase mb-4 block">
                {post.data.categoria} — {post.data.fecha.toLocaleDateString('es-ES', { year: 'numeric', month: 'long', day: 'numeric' })}
            </span>
            <h1 class="text-3xl md:text-5xl font-bold text-gray-900 leading-tight mb-8">
                {post.data.titulo}
            </h1>
            
            <!-- Imagen Principal -->
            <div class="rounded-3xl overflow-hidden shadow-xl mb-12 max-h-[500px]">
                <Image src={post.data.imagen} alt={post.data.titulo} class="w-full h-full object-cover" />
            </div>
        </div>

        <!-- Contenido del Artículo -->
        <article class="prose prose-blue prose-lg mx-auto text-gray-600">
            <Content />
        </article>

        <!-- Botón volver -->
        <div class="mt-16 pt-8 border-t border-gray-100 text-center">
            <a href="/blog" class="inline-flex items-center text-gray-500 hover:text-blue-600 font-medium transition-colors">
                ← Volver a Actualidad
            </a>
        </div>

    </main>

    <Footer />
  </body>
</html>